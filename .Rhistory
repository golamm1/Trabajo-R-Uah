load("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Processing/Procesamiento Trabajo Creditos Universitarios.Rdata")
pacman::p_load(sjlabelled,
dplyr,
stargazer,
sjmisc,
summarytools,
kableExtra,
sjPlot,
corrplot,
sessioninfo,
ggplot2)
correlaciones <- cor(casen_superior, use = "complete.obs")
View(casen_superior)
correlaciones <- cor(casen_superior, use = "complete.obs")
casen_superior <- as.numeric(casen_superior)
as.numeric(casen_superior)
correlaciones <- cor(casen_superior, use = "complete.obs")
as.numeric(casen_superior)
# Convertir todas las columnas a numérico
casen_superior <- as.data.frame(lapply(casen_superior, as.numeric))
correlaciones <- cor(casen_superior, use = "complete.obs")
View(casen_superior)
View(correlaciones)
View(casen_superior)
load("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Processing/Procesamiento Trabajo Creditos Universitarios.Rdata")
View(casen_superior)
sjPlot::tab_corr(casen_superior,
triangle = "lower")
# Convertir todas las columnas a numérico
str(casen_superior)
View(casen_superior)
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::tab_corr(casen_superior,
triangle = "lower")
as.numeric(casen_superior)
View(casen_superior)
sjPlot::tab_corr(casen_superior,
triangle = "lower")
View(casen_superior)
casen_superior <-as.data.frame(lapply(casen_superior, as.numeric))
View(casen_superior)
sjPlot::tab_corr(casen_superior,
triangle = "lower")
sjPlot::plot_scatter(casen_superior, nivel_educ, estab_sup)
sjPlot::plot_scatter(casen_superior, nivel_educ, credi_sup)
sjPlot::plot_scatter(casen_superior, estab_educ, credi_sup)
sjPlot::plot_scatter(casen_superior, credi_sup, estab_sup)
sjPlot::plot_scatter(casen_superior, estab_sup, credi_sup)
indicadores_sup = casen_superior %>%
rowwise() %>%
mutate(educ = mean(c(nivel_educ, estab_sup)),
financiamiento = mean(c(credi_sup, pago_carrera)),
) %>%
ungroup()
View(indicadores_sup)
indicadores_sup = casen_superior %>%
rowwise() %>%
mutate(tipo_educacion = mean(c(nivel_educ, estab_sup)),
financiamiento = mean(c(credi_sup, pago_carrera)),
) %>%
ungroup()
indicadores_sup = indicadores_sup %>%
rowwise() %>%
mutate(financiamiento_superior = mean(c(tipo_educacion, financiamiento))) %>%
ungroup()
View(indicadores_sup)
View(indicadores_sup)
View(indicadores_sup)
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2.00~"Estudia sin créditos",
financiamiento_superior<2.00~"Estudia con créditos")
)
prop.table(table(indicadores_sup$pobreza))
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2.00~"Estudia sin créditos",
financiamiento_superior<2.00~"Estudia con créditos")
)
prop.table(table(indicadores_sup$financiamiento_superior))
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2.00~"Estudia sin créditos",
financiamiento_superior<=2.00~"Estudia con créditos")
)
prop.table(table(indicadores_sup$financiamiento_superior))
View(indicadores_sup)
remove(indicadores_sup)
indicadores_sup = casen_superior %>%
rowwise() %>%
mutate(tipo_educacion = mean(c(nivel_educ, estab_sup)),
financiamiento = mean(c(credi_sup, pago_carrera)),
) %>%
ungroup()
indicadores_sup = indicadores_sup %>%
rowwise() %>%
mutate(financiamiento_superior = mean(c(tipo_educacion, financiamiento))) %>%
ungroup()
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
pobreza<2~"Estudiante con créditos"))
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
financiamiento_superior<2~"Estudiante con créditos"))
prop.table(table(indicadores_sup$financiamiento_superior))
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
financiamiento_superior<2~"Estudiante con créditos"))
prop.table(table(indicadores_sup$financiamiento_superior))*100
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
financiamiento_superior<2~"Estudiante con créditos"))
prop.table(table(indicadores_sup$financiamiento_superior))
View(indicadores_sup)
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
financiamiento_superior<2~"Estudiante con créditos"))
prop.table(table(indicadores_sup$financiamiento_superior))
remove(indicadores_sup)
indicadores_sup = casen_superior %>%
rowwise() %>%
mutate(tipo_educacion = mean(c(nivel_educ, estab_sup)),
financiamiento = mean(c(credi_sup, pago_carrera)),
) %>%
ungroup()
indicadores_sup = indicadores_sup %>%
rowwise() %>%
mutate(financiamiento_superior = mean(c(tipo_educacion, financiamiento))) %>%
ungroup()
indicadores_sup <- indicadores_sup %>% mutate(financiamiento_superior = case_when(financiamiento_superior>=2~"Estudiante sin créditos",
financiamiento_superior<2~"Estudiante con créditos"))
prop.table(table(indicadores_sup$financiamiento_superior))*100
View(indicadores_sup)
#Instalación de paquetes a utilizar
install.packages("pacman")
install.packages("pacman")
#Instalación de paquetes a utilizar
install.packages("pacman")
install.packages("pacman")
#Carga de paquetes
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven)
#Ajuste del espacio de trabajo
rm(list=ls())
options(scipen=999)
#Abrimos base de datos
setwd("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Input")
casen_proce <- read_dta("casen2022.dta")
#Abrimos base de datos
setwd("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Input")
casen_proce <- read_dta("casen2022.dta")
casen_proce <- read_dta("casen2022.dta")
casen_proce <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#Chequeo de base de datos
dim(casen2022)
View(casen2022)
#Paso 1: Selección de variables
#1.1: Buscamos variables con la palabra creditos
find_var(data = casen2022,"educación")
View(casen_superior)
View(indicadores_sup)
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#Abrimos base de datos
setwd("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Input")
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#Instalación de paquetes a utilizar
install.packages("pacman")
#Carga de paquetes
pacman::p_load(dplyr, sjmisc, car, sjlabelled, stargazer, haven)
#Ajuste del espacio de trabajo
rm(list=ls())
options(scipen=999)
#Abrimos base de datos
setwd("C:/Users/franr/OneDrive/Documentos/GitHub/Trabajo-R-Uah/Input")
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#Chequeo de base de datos
dim(casen2022)
View(casen2022)
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen_proce %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10) #Tipo de establecimiento superior al que asiste
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10) #Tipo de establecimiento superior al que asiste
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen2022 %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10) #Tipo de establecimiento superior al que asiste
remove(casen2022)
###Guardamos la nueva base de datos casen_proce para hacerla más liviana para Github###
write_dta(casen_proce, "casen_proce.dta")
#1.2.1: Observamos cómo quedaron las variables seleccionadas
names(casen_proce)
sjlabelled::get_label(casen_proce)
View(casen_proce)
#2.2: Recodificación
casen_proce$e6a_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
casen_proce$e18 <- recode(casen_proce$e18, "c(-99, -88)=NA")
casen_proce$e10 <- recode(casen_proce$e10, "c(-99, -88)=NA")
#Paso 3: Etiquetado
casen_proce <- casen_proce %>% rename("nivel_educ"=e6a_asiste, #Nivel educacion al que asiste
"credi_sup"=e18, #Tipo de crédito al que optó
"pago_carrera"=e16, #Paga la carrera
"estab_sup"=e10) #Tipo de establecimiento al que asiste
#3.1: Asociamos etiquetas a las variables
casen_proce$nivel_educ <- set_label(x = casen_proce$nivel_educ,label = "Nivel educacional")
get_label(casen_proce$nivel_educ)
casen_proce$credi_sup <- set_label(x = casen_proce$credi_sup,label = "Tipo de crédito")
get_label(casen_proce$credi_sup)
casen_proce$pago_carrera <- set_label(x = casen_proce$pago_carrera,label = "Paga por la carrera que estudia")
get_label(casen_proce$pago_carrera)
casen_proce$estab_sup <- set_label(x = casen_proce$estab_sup,label = "Tipo de establecimiento")
get_label(casen_proce$estab_sup)
View(casen_proce)
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen2022 %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10,
e6b_asiste,
e6b_no_asiste) #Tipo de establecimiento superior al que asiste
#2.2: Recodificación
casen_proce$e6a_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e6a_no_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
casen_proce$e18 <- recode(casen_proce$e18, "c(-99, -88)=NA")
casen_proce$e10 <- recode(casen_proce$e10, "c(-99, -88)=NA")
View(casen_proce)
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen2022 %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10,
y1,
e6b_asiste,
e6b_no_asiste) #Tipo de establecimiento superior al que asiste
View(casen_proce)
#2.2: Recodificación
casen_proce$e6a_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e6a_no_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
casen_proce$e18 <- recode(casen_proce$e18, "c(-99, -88)=NA")
casen_proce$e10 <- recode(casen_proce$e10, "c(-99, -88)=NA")
casen_proce$y1 <- recode(casen_proce$y1, "c(-99, -88)=NA")
View(casen_proce)
remove(casen_proce)
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen2022 %>% select(e18, # Tipo de crédito recibido para pagar la carrera
e6a_asiste,  # Nivel educacional al que asiste
e16, # Paga por la carrera que estudia
e10,
y1,
e6b_asiste,
e6b_no_asiste) #Tipo de establecimiento superior al que asiste
#2.2: Recodificación
casen_proce$e6a_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e6a_no_asiste <- recode(casen_proce$e6a_no_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
View(casen_proce)
#2.2: Recodificación
casen_proce$e6a_asiste <- recode(casen_proce$e6a_asiste, "c(-99, -88)=NA")
casen_proce$e6b_no_asiste <- recode(casen_proce$e6b_no_asiste, "c(-99, -88)=NA")
casen_proce$e6b_asiste <- recode(casen_proce$e6b_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
casen_proce$e18 <- recode(casen_proce$e18, "c(-99, -88)=NA")
casen_proce$e10 <- recode(casen_proce$e10, "c(-99, -88)=NA")
casen_proce$y1 <- recode(casen_proce$y1, "c(-99, -88)=NA")
#Paso 3: Etiquetado
casen_proce <- casen_proce %>% rename("nivel_educ"=e6a_asiste, #Nivel educacion al que asiste
"credi_sup"=e18, #Tipo de crédito al que optó
"pago_carrera"=e16, #Paga la carrera
"estab_sup"=e10,
"ingresos"=y1,
"curso_aprob"=e6a_asiste,
) #Tipo de establecimiento al que asiste
View(casen_proce)
casen2022 <- read_dta("Base de datos Casen 2022 STATA_18 marzo 2024.dta")
#1.2: Selección de variables a utilizar para el estudio
casen_proce <- casen2022 %>% select(e18, # Tipo de crédito recibido para pagar la carrera (escala)
e8,  # Establecimiento en el cual realizó su ed. superior(escala)
e16, # Paga por la carrera que estudia
y1, # Ingreso (recodificar por tramo y escala)
e6b_no_asiste, #Último año aprobado de la educación superior al que asistió
o2) #Situación laboral
#2.2: Recodificación
casen_proce$e6b_no_asiste <- recode(casen_proce$e6b_no_asiste, "c(-99, -88)=NA")
casen_proce$e16 <- recode(casen_proce$e16, "c(-99, -88)=NA")
casen_proce$e18 <- recode(casen_proce$e18, "c(-99, -88)=NA")
casen_proce$o2 <- recode(casen_proce$o2, "c(-99, -88)=NA")
casen_proce$y1 <- recode(casen_proce$y1, "c(-99, -88)=NA")
#Paso 3: Etiquetado
casen_proce <- casen_proce %>% rename("nivel_educ"=e6b_no_asiste, #Nivel educacion al que asiste
"credi_sup"=e18, #Tipo de crédito al que optó
"paga_carrera"=e16, #Paga la carrera
"sit_laboral"=e10, #Situación laboral
"ingresos"=y1, #Ingresos
"estab_sup"=e8) #Tipo de establecimiento en el cual realizó la educación superior
#Paso 3: Etiquetado
casen_proce <- casen_proce %>% rename("nivel_educ"=e6b_no_asiste, #Nivel educacion al que asiste
"credi_sup"=e18, #Tipo de crédito al que optó
"paga_carrera"=e16, #Paga la carrera
"sit_laboral"=o2, #Situación laboral
"ingresos"=y1, #Ingresos
"estab_sup"=e8) #Tipo de establecimiento en el cual realizó la educación superior
View(casen_proce)
#3.1: Asociamos etiquetas a las variables
casen_proce$nivel_educ <- set_label(x = casen_proce$nivel_educ,label = "Nivel educacional")
get_label(casen_proce$nivel_educ)
casen_proce$credi_sup <- set_label(x = casen_proce$credi_sup,label = "Tipo de crédito")
get_label(casen_proce$credi_sup)
casen_proce$pago_carrera <- set_label(x = casen_proce$pago_carrera,label = "Paga por la carrera que estudia")
casen_proce$pago_carrera <- set_label(x = casen_proce$paga_carrera,label = "Paga por la carrera que estudia")
get_label(casen_proce$pago_carrera)
casen_proce$estab_sup <- set_label(x = casen_proce$estab_sup,label = "Tipo de establecimiento")
get_label(casen_proce$estab_sup)
View(casen_proce)
casen_proce$paga_carrera <- set_label(x = casen_proce$paga_carrera,label = "Paga por la carrera que estudia")
get_label(casen_proce$paga_carrera)
casen_proce$credi_sup <- car::recode(casen_proce$credi_sup, "c(1,2,3)=1; c(4)=2; c(5)=3; c(6)=4; c(7)=5; c(8)=6")
casen_proce$credi_sup <- set_labels(casen_proce$credi_sup,
labels=c( "Crédito estatal"=1,
"Crédito otorgado por institución educacional"=2,
"Apoyo familiar"=3,
"Crédito de instituciones financieras privadas"=4,
"Oto financiamiento"=5,
"Ninguno"=6))
View(casen_proce)
View(casen_proce)
